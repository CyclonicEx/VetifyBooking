{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Admin Dashboard - Vetify{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/admin-sidebar.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- BotÃ³n para mÃ³vil -->
    <button class="mobile-toggle" onclick="toggleSidebar()">â˜°</button>

    <div class="admin-layout">
        <!-- SIDEBAR -->
        <aside class="sidebar" id="sidebar">
            <!-- Logo -->
            <div class="sidebar-logo">
                <div class="sidebar-logo-icon">
                    <img src="{% static 'images/vetify-logo.png' %}" alt="Vetify Logo">
                </div>
                <div class="sidebar-logo-text">
                    <h1>Vetify Admin</h1>
                    <p class="tagline">Panel de Control</p>
                </div>
            </div>

            <!-- NavegaciÃ³n -->
            <nav class="sidebar-nav">
                <!-- SecciÃ³n: Principal -->
                <div class="sidebar-nav-section">
                    <div class="sidebar-nav-title">Principal</div>
                    <a href="{% url 'admin_dashboard:dashboard' %}" class="sidebar-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
                        <span class="sidebar-link-icon">ğŸ“Š</span>
                        <span class="sidebar-link-text">Dashboard</span>
                    </a>
                    <a href="{% url 'admin_dashboard:reports' %}" class="sidebar-link {% if request.resolver_match.url_name == 'reports' %}active{% endif %}">
                        <span class="sidebar-link-icon">ğŸ“ˆ</span>
                        <span class="sidebar-link-text">Reportes</span>
                    </a>
                </div>

                <!-- SecciÃ³n: GestiÃ³n -->
                <div class="sidebar-nav-section">
                    <div class="sidebar-nav-title">GestiÃ³n</div>
                    <a href="{% url 'admin_dashboard:appointments' %}" class="sidebar-link {% if request.resolver_match.url_name == 'appointments' %}active{% endif %}">
                        <span class="sidebar-link-icon">ğŸ“…</span>
                        <span class="sidebar-link-text">Citas</span>
                    </a>
                    <a href="{% url 'admin_dashboard:users' %}" class="sidebar-link {% if request.resolver_match.url_name == 'users' %}active{% endif %}">
                        <span class="sidebar-link-icon">ğŸ‘¥</span>
                        <span class="sidebar-link-text">Usuarios</span>
                    </a>
                    <a href="{% url 'admin_dashboard:pets' %}" class="sidebar-link {% if request.resolver_match.url_name == 'pets' %}active{% endif %}">
                        <span class="sidebar-link-icon">ğŸ¾</span>
                        <span class="sidebar-link-text">Mascotas</span>
                    </a>
                    <a href="{% url 'admin_dashboard:veterinarians' %}" class="sidebar-link {% if request.resolver_match.url_name == 'veterinarians' %}active{% endif %}">
                        <span class="sidebar-link-icon">ğŸ‘¨â€âš•ï¸</span>
                        <span class="sidebar-link-text">Veterinarios</span>
                    </a>
                </div>

                <!-- SecciÃ³n: ConfiguraciÃ³n -->
                <div class="sidebar-nav-section">
                    <div class="sidebar-nav-title">ConfiguraciÃ³n</div>
                    <a href="{% url 'admin_dashboard:services' %}" class="sidebar-link {% if request.resolver_match.url_name == 'services' %}active{% endif %}">
                        <span class="sidebar-link-icon">ğŸ’‰</span>
                        <span class="sidebar-link-text">Servicios</span>
                    </a>
                    <a href="{% url 'admin_dashboard:schedules' %}" class="sidebar-link {% if request.resolver_match.url_name == 'schedules' %}active{% endif %}">
                        <span class="sidebar-link-icon">ğŸ•</span>
                        <span class="sidebar-link-text">Horarios</span>
                    </a>
                    <a href="{% url 'admin_dashboard:upload_document' %}" class="sidebar-link {% if request.resolver_match.url_name == 'upload_document' %}active{% endif %}">
                        <span class="sidebar-link-icon">ğŸ“„</span>
                        <span class="sidebar-link-text">Documentos</span>
                    </a>
                </div>
            </nav>

            <!-- Footer del sidebar -->
            <div class="sidebar-footer">
                <a href="{% url 'home' %}" class="sidebar-link">
                    <span class="sidebar-link-icon">ğŸ </span>
                    <span class="sidebar-link-text">Vista Usuario</span>
                </a>
                <a href="{% url 'logout' %}" class="sidebar-logout">
                    <span class="sidebar-link-icon">ğŸšª</span>
                    <span>Cerrar SesiÃ³n</span>
                </a>
            </div>
        </aside>

        <!-- CONTENIDO PRINCIPAL -->
        <div class="main-content">
            <!-- Header superior -->
            <header class="top-header">
                <h1 class="page-title">{% block page_title %}Dashboard{% endblock %}</h1>
                <div class="header-actions">
                    <div class="user-info">
                        <div class="user-avatar">{{ user.first_name.0|upper }}{{ user.last_name.0|upper }}</div>
                        <span class="user-name">{{ user.get_full_name|default:user.username }}</span>
                    </div>
                </div>
            </header>

            <!-- Mensajes -->
            {% if messages %}
            <div class="messages-container">
                {% for message in messages %}
                <div class="message message-{{ message.tags }}">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <!-- Contenido de la pÃ¡gina -->
            <main>
                {% block content %}{% endblock %}
            </main>
        </div>
    </div>

    <script>
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        // Cerrar sidebar al hacer click fuera (mÃ³vil)
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('.mobile-toggle');
            
            if (window.innerWidth <= 1024) {
                if (!sidebar.contains(event.target) && event.target !== toggle) {
                    sidebar.classList.remove('open');
                }
            }
        });

        // Auto-cerrar mensajes despuÃ©s de 5 segundos
        setTimeout(function() {
            const messages = document.querySelectorAll('.message');
            messages.forEach(function(message) {
                message.style.animation = 'slideOut 0.3s ease-out forwards';
                setTimeout(function() {
                    message.remove();
                }, 300);
            });
        }, 5000);
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
